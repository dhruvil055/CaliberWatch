{"ast":null,"code":"import _objectSpread from\"C:/Users/kyada/The Caliber/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Form,Spinner}from'react-bootstrap';import{useParams,useNavigate}from'react-router-dom';import{watchAPI}from'../services/api';import Swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function WatchDetail(){const{id}=useParams();const navigate=useNavigate();const[watch,setWatch]=useState(null);const[loading,setLoading]=useState(true);const[quantity,setQuantity]=useState(1);// eslint-disable-next-line react-hooks/exhaustive-deps\nuseEffect(()=>{fetchWatch();},[id]);const fetchWatch=async()=>{try{setLoading(true);const response=await watchAPI.getWatchById(id);setWatch(response.data);}catch(error){Swal.fire('Error','Failed to load watch details','error');navigate('/');}finally{setLoading(false);}};const handleAddToCart=()=>{const cart=JSON.parse(localStorage.getItem('cart'))||[];const existingItem=cart.find(item=>item._id===watch._id);if(existingItem){existingItem.quantity+=quantity;}else{cart.push(_objectSpread(_objectSpread({},watch),{},{quantity}));}localStorage.setItem('cart',JSON.stringify(cart));localStorage.setItem('cartCount',cart.reduce((sum,item)=>sum+item.quantity,0));Swal.fire('Success','Watch added to cart','success').then(()=>{navigate('/cart');});};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"text-center my-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});}if(!watch){return/*#__PURE__*/_jsx(Container,{className:\"text-center my-5\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Watch not found\"})});}return/*#__PURE__*/_jsx(Container,{className:\"my-5\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/watches/\".concat(watch.image),alt:watch.title,className:\"img-fluid\",style:{maxHeight:'400px',objectFit:'cover'}})}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h1\",{children:watch.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"price my-3\",children:[\"\\u20B9\",watch.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:watch.description}),/*#__PURE__*/_jsx(Card,{className:\"p-4\",children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Quantity:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",min:\"1\",value:quantity,onChange:e=>setQuantity(parseInt(e.target.value))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(Button,{size:\"lg\",variant:\"primary\",onClick:handleAddToCart,children:\"Add to Cart\"})})]})})]})]})});}export default WatchDetail;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Form","Spinner","useParams","useNavigate","watchAPI","Swal","jsx","_jsx","jsxs","_jsxs","WatchDetail","id","navigate","watch","setWatch","loading","setLoading","quantity","setQuantity","fetchWatch","response","getWatchById","data","error","fire","handleAddToCart","cart","JSON","parse","localStorage","getItem","existingItem","find","item","_id","push","_objectSpread","setItem","stringify","reduce","sum","then","className","children","animation","md","src","concat","image","alt","title","style","maxHeight","objectFit","price","description","Group","Label","Control","type","min","value","onChange","e","parseInt","target","size","variant","onClick"],"sources":["C:/Users/kyada/The Caliber/frontend/src/pages/WatchDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Button, Form, Spinner } from 'react-bootstrap';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { watchAPI } from '../services/api';\r\nimport Swal from 'sweetalert2';\r\n\r\nfunction WatchDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [watch, setWatch] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    fetchWatch();\r\n  }, [id]);\r\n\r\n  const fetchWatch = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await watchAPI.getWatchById(id);\r\n      setWatch(response.data);\r\n    } catch (error) {\r\n      Swal.fire('Error', 'Failed to load watch details', 'error');\r\n      navigate('/');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    const cart = JSON.parse(localStorage.getItem('cart')) || [];\r\n    const existingItem = cart.find((item) => item._id === watch._id);\r\n\r\n    if (existingItem) {\r\n      existingItem.quantity += quantity;\r\n    } else {\r\n      cart.push({ ...watch, quantity });\r\n    }\r\n\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n    localStorage.setItem('cartCount', cart.reduce((sum, item) => sum + item.quantity, 0));\r\n\r\n    Swal.fire('Success', 'Watch added to cart', 'success').then(() => {\r\n      navigate('/cart');\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"text-center my-5\">\r\n        <Spinner animation=\"border\" />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!watch) {\r\n    return (\r\n      <Container className=\"text-center my-5\">\r\n        <h3>Watch not found</h3>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"my-5\">\r\n      <Row>\r\n        <Col md={6}>\r\n          <img\r\n            src={`/images/watches/${watch.image}`}\r\n            alt={watch.title}\r\n            className=\"img-fluid\"\r\n            style={{ maxHeight: '400px', objectFit: 'cover' }}\r\n          />\r\n        </Col>\r\n        <Col md={6}>\r\n          <h1>{watch.title}</h1>\r\n          <div className=\"price my-3\">â‚¹{watch.price}</div>\r\n          <p className=\"text-muted\">{watch.description}</p>\r\n\r\n          <Card className=\"p-4\">\r\n            <Form>\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Quantity:</Form.Label>\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={quantity}\r\n                  onChange={(e) => setQuantity(parseInt(e.target.value))}\r\n                />\r\n              </Form.Group>\r\n\r\n              <div className=\"d-grid gap-2\">\r\n                <Button size=\"lg\" variant=\"primary\" onClick={handleAddToCart}>\r\n                  Add to Cart\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default WatchDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}