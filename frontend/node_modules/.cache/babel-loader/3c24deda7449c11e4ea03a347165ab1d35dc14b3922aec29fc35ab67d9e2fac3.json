{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{Container,Row,Col,Card,Table,Spinner}from'react-bootstrap';import{useNavigate}from'react-router-dom';import{orderAPI}from'../services/api';import{AuthContext}from'../context/AuthContext';import Swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const navigate=useNavigate();const{user}=useContext(AuthContext);const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{if(!user){navigate('/login');return;}fetchOrders();},[user,navigate]);const fetchOrders=async()=>{try{setLoading(true);const response=await orderAPI.getUserOrders();setOrders(response.data);}catch(error){Swal.fire('Error','Failed to load orders','error');}finally{setLoading(false);}};if(!user){return null;}return/*#__PURE__*/_jsxs(Container,{className:\"my-5\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-5\",children:/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",user.name]})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(Card.Title,{children:\"My Orders\"})}),/*#__PURE__*/_jsx(Card.Body,{children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})}):orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No orders yet.\"}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Items\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id.slice(0,8)}),/*#__PURE__*/_jsxs(\"td\",{children:[order.items.length,\" item(s)\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",order.total]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-\".concat(order.status==='Delivered'?'success':order.status==='Cancelled'?'danger':'warning'),children:order.status})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(order.createdAt).toLocaleDateString()})]},order._id))})]})})]})})})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useContext","Container","Row","Col","Card","Table","Spinner","useNavigate","orderAPI","AuthContext","Swal","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","user","orders","setOrders","loading","setLoading","fetchOrders","response","getUserOrders","data","error","fire","className","children","md","name","Header","Title","Body","animation","length","striped","bordered","hover","map","order","_id","slice","items","total","concat","status","Date","createdAt","toLocaleDateString"],"sources":["C:/Users/kyada/The Caliber/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { Container, Row, Col, Card, Table, Spinner } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { orderAPI } from '../services/api';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport Swal from 'sweetalert2';\r\n\r\nfunction Dashboard() {\r\n  const navigate = useNavigate();\r\n  const { user } = useContext(AuthContext);\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    fetchOrders();\r\n  }, [user, navigate]);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await orderAPI.getUserOrders();\r\n      setOrders(response.data);\r\n    } catch (error) {\r\n      Swal.fire('Error', 'Failed to load orders', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Container className=\"my-5\">\r\n      <Row className=\"mb-5\">\r\n        <Col md={8}>\r\n          <h2>My Dashboard</h2>\r\n          <p>Welcome, {user.name}</p>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row>\r\n        <Col>\r\n          <Card>\r\n            <Card.Header>\r\n              <Card.Title>My Orders</Card.Title>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              {loading ? (\r\n                <div className=\"text-center\">\r\n                  <Spinner animation=\"border\" />\r\n                </div>\r\n              ) : orders.length === 0 ? (\r\n                <p>No orders yet.</p>\r\n              ) : (\r\n                <Table striped bordered hover>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Order ID</th>\r\n                      <th>Items</th>\r\n                      <th>Total</th>\r\n                      <th>Status</th>\r\n                      <th>Date</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {orders.map((order) => (\r\n                      <tr key={order._id}>\r\n                        <td>{order._id.slice(0, 8)}</td>\r\n                        <td>{order.items.length} item(s)</td>\r\n                        <td>â‚¹{order.total}</td>\r\n                        <td>\r\n                          <span\r\n                            className={`badge bg-${\r\n                              order.status === 'Delivered'\r\n                                ? 'success'\r\n                                : order.status === 'Cancelled'\r\n                                ? 'danger'\r\n                                : 'warning'\r\n                            }`}\r\n                          >\r\n                            {order.status}\r\n                          </span>\r\n                        </td>\r\n                        <td>{new Date(order.createdAt).toLocaleDateString()}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}