{"ast":null,"code":"import _objectSpread from\"C:/Users/kyada/The Caliber/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Table}from'react-bootstrap';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(){const[cart,setCart]=useState([]);const[subtotal,setSubtotal]=useState(0);// eslint-disable-next-line react-hooks/exhaustive-deps\nuseEffect(()=>{loadCart();window.addEventListener('cartUpdated',loadCart);return()=>window.removeEventListener('cartUpdated',loadCart);},[]);const loadCart=()=>{const cartData=JSON.parse(localStorage.getItem('cart'))||[];setCart(cartData);calculateSubtotal(cartData);};const calculateSubtotal=cartData=>{const total=cartData.reduce((sum,item)=>sum+item.price*item.quantity,0);setSubtotal(total);};const updateQuantity=(id,newQuantity)=>{const updatedCart=cart.map(item=>item._id===id?_objectSpread(_objectSpread({},item),{},{quantity:newQuantity}):item);const filteredCart=updatedCart.filter(item=>item.quantity>0);setCart(filteredCart);localStorage.setItem('cart',JSON.stringify(filteredCart));localStorage.setItem('cartCount',filteredCart.reduce((sum,item)=>sum+item.quantity,0));calculateSubtotal(filteredCart);};const removeItem=id=>{const updatedCart=cart.filter(item=>item._id!==id);setCart(updatedCart);localStorage.setItem('cart',JSON.stringify(updatedCart));localStorage.setItem('cartCount',updatedCart.reduce((sum,item)=>sum+item.quantity,0));calculateSubtotal(updatedCart);};const shipping=10;const total=subtotal+shipping;if(cart.length===0){return/*#__PURE__*/_jsxs(Container,{className:\"my-5 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-primary mt-3\",children:\"Continue Shopping\"})]});}return/*#__PURE__*/_jsxs(Container,{className:\"my-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:8,children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:item.quantity,onChange:e=>updateQuantity(item._id,parseInt(e.target.value)),style:{width:'60px'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",item.price*item.quantity]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:()=>removeItem(item._id),children:\"Remove\"})})]},item._id))})]})}),/*#__PURE__*/_jsx(Col,{lg:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3\",children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",subtotal]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",shipping]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"strong\",{className:\"price\",children:[\"\\u20B9\",total]})]}),/*#__PURE__*/_jsx(Link,{to:\"/checkout\",className:\"btn btn-primary w-100\",children:\"Proceed to Checkout\"})]})})})]})]});}export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Table","Link","jsx","_jsx","jsxs","_jsxs","Cart","cart","setCart","subtotal","setSubtotal","loadCart","window","addEventListener","removeEventListener","cartData","JSON","parse","localStorage","getItem","calculateSubtotal","total","reduce","sum","item","price","quantity","updateQuantity","id","newQuantity","updatedCart","map","_id","_objectSpread","filteredCart","filter","setItem","stringify","removeItem","shipping","length","className","children","to","lg","striped","bordered","hover","title","type","min","value","onChange","e","parseInt","target","style","width","variant","size","onClick","Body"],"sources":["C:/Users/kyada/The Caliber/frontend/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Button, Table } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Cart() {\r\n  const [cart, setCart] = useState([]);\r\n  const [subtotal, setSubtotal] = useState(0);\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    loadCart();\r\n    window.addEventListener('cartUpdated', loadCart);\r\n    return () => window.removeEventListener('cartUpdated', loadCart);\r\n  }, []);\r\n\r\n  const loadCart = () => {\r\n    const cartData = JSON.parse(localStorage.getItem('cart')) || [];\r\n    setCart(cartData);\r\n    calculateSubtotal(cartData);\r\n  };\r\n\r\n  const calculateSubtotal = (cartData) => {\r\n    const total = cartData.reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n    setSubtotal(total);\r\n  };\r\n\r\n  const updateQuantity = (id, newQuantity) => {\r\n    const updatedCart = cart.map((item) =>\r\n      item._id === id ? { ...item, quantity: newQuantity } : item\r\n    );\r\n    const filteredCart = updatedCart.filter((item) => item.quantity > 0);\r\n    setCart(filteredCart);\r\n    localStorage.setItem('cart', JSON.stringify(filteredCart));\r\n    localStorage.setItem('cartCount', filteredCart.reduce((sum, item) => sum + item.quantity, 0));\r\n    calculateSubtotal(filteredCart);\r\n  };\r\n\r\n  const removeItem = (id) => {\r\n    const updatedCart = cart.filter((item) => item._id !== id);\r\n    setCart(updatedCart);\r\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    localStorage.setItem('cartCount', updatedCart.reduce((sum, item) => sum + item.quantity, 0));\r\n    calculateSubtotal(updatedCart);\r\n  };\r\n\r\n  const shipping = 10;\r\n  const total = subtotal + shipping;\r\n\r\n  if (cart.length === 0) {\r\n    return (\r\n      <Container className=\"my-5 text-center\">\r\n        <h2>Your cart is empty</h2>\r\n        <Link to=\"/\" className=\"btn btn-primary mt-3\">\r\n          Continue Shopping\r\n        </Link>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"my-5\">\r\n      <h2 className=\"mb-4\">Shopping Cart</h2>\r\n      <Row>\r\n        <Col lg={8}>\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Product</th>\r\n                <th>Price</th>\r\n                <th>Quantity</th>\r\n                <th>Total</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {cart.map((item) => (\r\n                <tr key={item._id}>\r\n                  <td>{item.title}</td>\r\n                  <td>₹{item.price}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={item.quantity}\r\n                      onChange={(e) => updateQuantity(item._id, parseInt(e.target.value))}\r\n                      style={{ width: '60px' }}\r\n                    />\r\n                  </td>\r\n                  <td>₹{item.price * item.quantity}</td>\r\n                  <td>\r\n                    <Button variant=\"danger\" size=\"sm\" onClick={() => removeItem(item._id)}>\r\n                      Remove\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </Col>\r\n        <Col lg={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <h5 className=\"mb-3\">Order Summary</h5>\r\n              <div className=\"d-flex justify-content-between mb-2\">\r\n                <span>Subtotal:</span>\r\n                <span>₹{subtotal}</span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between mb-3\">\r\n                <span>Shipping:</span>\r\n                <span>₹{shipping}</span>\r\n              </div>\r\n              <hr />\r\n              <div className=\"d-flex justify-content-between mb-3\">\r\n                <strong>Total:</strong>\r\n                <strong className=\"price\">₹{total}</strong>\r\n              </div>\r\n              <Link to=\"/checkout\" className=\"btn btn-primary w-100\">\r\n                Proceed to Checkout\r\n              </Link>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}